# l23o6 Lab7

## Backend Requirements

1. 订单及相关功能的实现；
   1. 选中对应车次后创建订单；
   2. 在用户界面显示已有订单（订单状态：待支付、已支付、已取消）；
   3. 订单的支付与取消；
   
     该实现重点在能够实现分段卖票。
     
2. 用户里程积分的实现；
   1. 用户在成功支付订单后获取一定的里程积分；
   2. 里程积分达到一定数量即会影响订单价格（打折）；
     
     在订单计算的价格需要访问车次的价格和用户的积分，共同来计算，让同学体验逻辑对象的协作。

3. 获取订单后根据车次设置的价格与用户的里程积分计算订单价格；   
   举例：里程积分达到1000，则该1000积分可以折 0.1%；
              1000到3000积分， 则该2000积分可以折0.15%；
              3000到10000积分， 则该7000积分可以折0.2%；
              10000到50000积分， 则该40000积分可以折0.25%；
              50000积分以上的积分，可以折0.3%
              
     这段实现可以利用表驱动方式来简化计算。

       
4. 支付订单时对支付价格的策略模式。已有微信支付方式，添加对支付宝支付方式的实现。该实现为桩程序。

     该要求让同学体会策略模式的实现，特别策略接口的制定。

## Tutorial

> demo 代码还未完成，以下内容未必与最终框架相符

1. 前端代码均已完成，自行阅读框架代码，可自行修改；
2. 订单 `Order` 在 `controller` 与 `service` 的实现，需自行阅读框架代码完成；
3. 用户 `User` 中需自行添加里程积分 `MileagePoints` 的实现，并在 `Order` 相应代码中实现对里程积分的调用；
4. 消息队列与 Redis 的引入，用于订单的支付与取消时的异步处理；
5. 支付订单（付款）与取消订单（退款）仅需与框架中的模拟钱包软件进行交互；

